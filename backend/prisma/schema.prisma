generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id      String  @id @default(cuid())
  name    String
  email   String  @unique
  avatar  String? @default("")
  clerkId String  @unique

  sessions Session[]

  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  Session   Session[] @relation("User")

  @@map("users")
}

model Session {
  id           String     @id @default(cuid())
  problem      String
  difficulty   Difficulty @default(MEDIUM)
  hostId       String
  host         User       @relation("User", fields: [hostId], references: [id])
  participants User[]
  status       Status     @default(active)
  callId       String     @default("")

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum Difficulty {
  EASY
  MEDIUM
  HARD
}

enum Status {
  active
  completed
}
